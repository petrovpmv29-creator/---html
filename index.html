<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Доктор Петров - Техники самопомощи</title>

    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">

    <style>
        @font-face {
            font-family: 'Humanist';
            src: url('Humanist.woff2') format('woff2'),
                 url('Humanist.woff') format('woff'),
                 url('Humanist.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Humanist';
            src: url('Humanist-Bold.woff2') format('woff2'),
                 url('Humanist-Bold.woff') format('woff'),
                 url('Humanist-Bold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
            font-display: swap;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Humanist', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #5fa3d0 0%, #7bc4dd 25%, #87ceeb 50%, #a8dff0 75%, #b8e6f5 100%);
            background-size: 400% 400%;
            animation: oceanGradient 15s ease infinite;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        @keyframes oceanGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(72, 209, 204, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(135, 206, 235, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(30, 144, 255, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        .screen {
            display: none;
            min-height: 100vh;
            padding: 20px;
            animation: fadeIn 0.3s ease-in;
            position: relative;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .header {
            text-align: center;
            padding: 30px 0;
            color: white;
            position: relative;
            z-index: 10;
        }

        .logo-container {
            margin-bottom: 20px;
        }

        .logo {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(72, 209, 204, 0.25));
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 25px;
            position: relative;
            z-index: 10;
            box-shadow: 0 8px 32px rgba(72, 209, 204, 0.35);
            animation: float 3s ease-in-out infinite;
            overflow: hidden;
        }
        
        .logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .background-logos {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .main-title {
            font-size: 32px;
            font-weight: 200;
            letter-spacing: 3px;
            margin-bottom: 8px;
            text-transform: uppercase;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
            animation: fadeInDown 0.8s ease;
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.95;
            letter-spacing: 2px;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
            animation: fadeInDown 0.8s ease 0.2s backwards;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .menu-button {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.92));
            border: 2px solid rgba(72, 209, 204, 0.4);
            border-radius: 25px;
            padding: 18px 30px;
            margin: 10px 0;
            width: 100%;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
            position: relative;
            z-index: 5;
            overflow: hidden;
        }
        
        .menu-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(72, 209, 204, 0.2), rgba(135, 206, 235, 0.2));
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .menu-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .menu-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(72, 209, 204, 0.3);
            border-color: rgba(72, 209, 204, 0.6);
        }
        
        .menu-button:active {
            transform: translateY(-1px) scale(1.01);
        }

        .menu-button-title {
            font-size: 18px;
            color: #2E8B9E;
            letter-spacing: 3px;
            margin-bottom: 5px;
            display: block;
            position: relative;
            z-index: 1;
            font-weight: 600;
        }

        .menu-button-subtitle {
            font-size: 12px;
            color: #5FA3D0;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
        }

        .menu-button.secondary {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.88));
        }

        .menu-button.panic .menu-button-title {
            color: #FF6B6B;
        }

        .menu-button.special {
            background: linear-gradient(135deg, rgba(30, 30, 30, 0.9), rgba(50, 50, 50, 0.85));
            border: 2px solid rgba(255, 107, 107, 0.4);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.2);
        }

        .menu-button.special:hover {
            border-color: rgba(255, 107, 107, 0.6);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }

        .menu-button.special .menu-button-title {
            color: #FF6B6B;
        }

        .menu-button.special .menu-button-subtitle {
            color: rgba(255, 255, 255, 0.7);
        }

        .back-button {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            padding: 10px 20px;
            margin-bottom: 20px;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateX(-3px);
            border-color: rgba(255, 255, 255, 0.7);
        }

        .breathing-circle-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 40px 0;
            min-height: 250px;
        }

        .breathing-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #2E8B9E, #48D1CC, #5FA3D0);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            box-shadow: 
                0 10px 30px rgba(72, 209, 204, 0.4),
                0 0 60px rgba(72, 209, 204, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            border: 3px solid rgba(255, 255, 255, 0.5);
            position: relative;
            will-change: transform;
        }
        
        .breathing-circle.breathing {
            animation: gentlePulse 2s ease-in-out infinite;
        }
        
        @keyframes gentlePulse {
            0%, 100% { 
                box-shadow: 
                    0 10px 30px rgba(72, 209, 204, 0.4),
                    0 0 60px rgba(72, 209, 204, 0.2),
                    inset 0 0 20px rgba(255, 255, 255, 0.1);
            }
            50% { 
                box-shadow: 
                    0 10px 40px rgba(72, 209, 204, 0.6),
                    0 0 80px rgba(72, 209, 204, 0.3),
                    inset 0 0 30px rgba(255, 255, 255, 0.2);
            }
        }
        
        @keyframes phaseChange {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.05); }
            75% { transform: scale(0.98); }
        }
        
        .breathing-circle.phase-changing {
            animation: phaseChange 0.4s ease;
        }

        .phase-text {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
        }

        .phase-subtext {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .countdown {
            font-size: 48px;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }

        .control-button {
            background: linear-gradient(135deg, #2E8B9E, #48D1CC);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 25px;
            padding: 14px 30px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 10px auto;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: block;
            box-shadow: 0 4px 15px rgba(72, 209, 204, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .control-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
        
        .control-button:hover::before {
            left: 100%;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(72, 209, 204, 0.4);
        }

        .control-button.stop {
            background: rgba(255, 255, 255, 0.2);
        }

        .control-button.stop:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .control-button.pause {
            background: #FFA500;
        }

        .control-button.resume {
            background: #4CAF50;
        }

        .stats-container {
            display: flex;
            justify-content: space-around;
            margin-top: 30px;
            gap: 10px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.3));
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px 25px;
            text-align: center;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 4px 15px rgba(72, 209, 204, 0.25);
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(72, 209, 204, 0.35);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
        }

        .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.92));
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
            border: 2px solid rgba(72, 209, 204, 0.3);
            transition: all 0.3s ease;
            animation: slideIn 0.5s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(72, 209, 204, 0.25);
            border-color: rgba(72, 209, 204, 0.5);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .card-title {
            font-size: 18px;
            color: #1e5f7a;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .card-description {
            font-size: 14px;
            color: #555;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .card-button {
            background: none;
            border: none;
            color: #2E8B9E;
            font-weight: bold;
            cursor: pointer;
            font-size: 15px;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .card-button::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #2E8B9E, #48D1CC);
            transition: width 0.3s ease;
        }
        
        .card-button:hover::after {
            width: 100%;
        }
        
        .card-button:hover {
            color: #48D1CC;
        }

        .grounding-card {
            background: linear-gradient(135deg, #2a5298, #3d7ea6);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 25px rgba(42, 82, 152, 0.3);
            border: 2px solid rgba(72, 209, 204, 0.3);
            animation: fadeIn 0.6s ease;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .grounding-card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px 0;
        }
        
        .grounding-step-number {
            font-size: 80px;
            font-weight: bold;
            background: linear-gradient(135deg, #48D1CC, #87CEEB);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            line-height: 1;
        }
        
        .grounding-step-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #5FA3D0;
        }
        
        .grounding-step-description {
            font-size: 18px;
            line-height: 1.6;
            color: white;
            margin-bottom: 15px;
        }
        
        .grounding-step-example {
            font-size: 15px;
            color: #B0B0B0;
            font-style: italic;
            margin-top: 10px;
        }
        
        .grounding-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid rgba(72, 209, 204, 0.3);
        }
        
        .grounding-nav-button {
            background: rgba(72, 209, 204, 0.2);
            border: 2px solid rgba(72, 209, 204, 0.5);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 24px;
            transition: all 0.3s ease;
        }
        
        .grounding-nav-button:hover {
            background: rgba(72, 209, 204, 0.4);
            transform: scale(1.1);
        }
        
        .grounding-nav-button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: scale(1);
        }
        
        .grounding-nav-button:disabled:hover {
            background: rgba(72, 209, 204, 0.2);
            transform: scale(1);
        }
        
        .grounding-progress {
            font-size: 18px;
            font-weight: bold;
            color: white;
            background: rgba(72, 209, 204, 0.2);
            padding: 8px 20px;
            border-radius: 20px;
            border: 2px solid rgba(72, 209, 204, 0.4);
        }
        
        .grounding-intro, .grounding-outro {
            text-align: center;
        }
        
        .grounding-outro .grounding-intro-title {
            font-size: 36px;
            margin-bottom: 25px;
        }
        
        .grounding-intro-title {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .grounding-intro-subtitle {
            font-size: 16px;
            color: #B0B0B0;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .start-grounding-button {
            background: linear-gradient(135deg, #48D1CC, #5FA3D0);
            border: 2px solid white;
            border-radius: 25px;
            padding: 15px 40px;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(72, 209, 204, 0.3);
        }
        
        .start-grounding-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(72, 209, 204, 0.4);
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .slide-in-right {
            animation: slideInRight 0.4s ease;
        }
        
        .slide-in-left {
            animation: slideInLeft 0.4s ease;
        }

        .advice-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.92));
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin: 20px 0;
            border: 3px solid rgba(255, 107, 107, 0.5);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.25);
            animation: scaleIn 0.5s ease;
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .advice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(0, 0, 0, 0.1);
        }

        .advice-number {
            font-size: 16px;
            font-weight: bold;
            color: #FF6B6B;
            letter-spacing: 1px;
        }

        .today-badge {
            background: linear-gradient(135deg, #FF6B6B, #FF8E8E);
            padding: 4px 12px;
            border-radius: 12px;
            color: white;
            font-size: 11px;
            font-weight: bold;
            letter-spacing: 1px;
            box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);
            animation: pulse 2s ease-in-out infinite;
        }

        .advice-text {
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            white-space: pre-line;
        }

        .page-title {
            font-size: 32px;
            font-weight: bold;
            color: white;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
            animation: fadeInDown 0.6s ease;
        }

        .page-subtitle {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.95);
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
            animation: fadeInDown 0.6s ease 0.2s backwards;
        }

        .instructions-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.92));
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 20px;
            border: 2px solid rgba(72, 209, 204, 0.4);
            box-shadow: 0 4px 15px rgba(72, 209, 204, 0.25);
            animation: slideIn 0.5s ease;
        }

        .instructions-title {
            font-size: 17px;
            font-weight: 700;
            color: #1e5f7a;
            margin-bottom: 14px;
            text-align: center;
        }

        .instruction-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            animation: fadeInUp 0.5s ease backwards;
        }
        
        .instruction-row:nth-child(2) { animation-delay: 0.1s; }
        .instruction-row:nth-child(3) { animation-delay: 0.2s; }
        .instruction-row:nth-child(4) { animation-delay: 0.3s; }

        .instruction-number {
            width: 32px;
            height: 32px;
            border-radius: 16px;
            background: linear-gradient(135deg, #2E8B9E, #48D1CC);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(72, 209, 204, 0.3);
        }

        .instruction-text {
            flex: 1;
        }

        .instruction-main {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }

        .instruction-sub {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }

        .meditation-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7B2CBF, #9C27B0, #B565D8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            box-shadow: 
                0 10px 30px rgba(156, 39, 176, 0.4),
                0 0 60px rgba(156, 39, 176, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            margin: 40px auto;
            border: 3px solid rgba(255, 255, 255, 0.5);
            animation: gentlePulse 2s ease-in-out infinite;
        }
        
        #meditationScreen .meditation-circle.phase-changing {
            animation: phaseChange 0.4s ease;
        }
        
        #relaxationScreen .meditation-circle {
            background: linear-gradient(135deg, #FF6B9D, #FF8FB3, #FFB3CC);
            box-shadow: 
                0 10px 30px rgba(255, 107, 157, 0.4),
                0 0 60px rgba(255, 107, 157, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            animation: relaxationPulse 2s ease-in-out infinite;
        }
        
        @keyframes relaxationPulse {
            0%, 100% { 
                box-shadow: 
                    0 10px 30px rgba(255, 107, 157, 0.4),
                    0 0 60px rgba(255, 107, 157, 0.2),
                    inset 0 0 20px rgba(255, 255, 255, 0.1);
            }
            50% { 
                box-shadow: 
                    0 10px 40px rgba(255, 107, 157, 0.6),
                    0 0 80px rgba(255, 107, 157, 0.3),
                    inset 0 0 30px rgba(255, 255, 255, 0.2);
            }
        }
        
        #relaxationScreen .meditation-circle.phase-changing {
            animation: phaseChange 0.4s ease;
        }

        .meditation-timer {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .meditation-prompt {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.92));
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(72, 209, 204, 0.25);
            border: 2px solid rgba(72, 209, 204, 0.3);
            animation: fadeIn 0.5s ease;
            transition: all 0.3s ease;
        }
        
        .meditation-prompt.flash {
            animation: flashPrompt 0.5s ease;
        }
        
        @keyframes flashPrompt {
            0%, 100% { 
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.92));
                border-color: rgba(72, 209, 204, 0.3);
            }
            50% { 
                background: linear-gradient(135deg, rgba(72, 209, 204, 0.3), rgba(72, 209, 204, 0.2));
                border-color: rgba(72, 209, 204, 0.6);
            }
        }

        .meditation-prompt-text {
            font-size: 16px;
            color: #333;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="mainMenu" class="screen active">
            <div class="background-logos"></div>
            
            <div class="header">
                <div class="logo-container">
                    <div class="logo">
                        <img src="logo.png" alt="Логотип д-р Петров">
                    </div>
                </div>
                <h1 class="main-title">д-р Петров</h1>
                <p class="subtitle">врач-психотерапевт</p>
            </div>
            
            <button class="menu-button" onclick="showScreen('breathingMenu')" style="animation: slideIn 0.5s ease 0.1s backwards;">
                <span class="menu-button-title">ДЫШУ</span>
                <span class="menu-button-subtitle">техники дыхания</span>
            </button>
            
            <button class="menu-button secondary" onclick="showScreen('meditationMenu')" style="animation: slideIn 0.5s ease 0.2s backwards;">
                <span class="menu-button-title">МЕДИТИРУЮ</span>
                <span class="menu-button-subtitle">практики осознанности</span>
            </button>
            
            <button class="menu-button secondary" onclick="showScreen('relaxationMenu')" style="animation: slideIn 0.5s ease 0.3s backwards;">
                <span class="menu-button-title">ОТПУСКАЮ</span>
                <span class="menu-button-subtitle">снятие напряжения</span>
            </button>
            
            <button class="menu-button secondary panic" onclick="showScreen('grounding')" style="animation: slideIn 0.5s ease 0.4s backwards;">
                <span class="menu-button-title">НЕ ПАНИКУЮ</span>
                <span class="menu-button-subtitle">техника заземления</span>
            </button>
            
            <button class="menu-button special" onclick="showScreen('advice')" style="animation: slideIn 0.5s ease 0.5s backwards;">
                <span class="menu-button-title">ВРЕДНЫЕ СОВЕТЫ</span>
                <span class="menu-button-subtitle">от психотерапевта</span>
            </button>
        </div>

        <div id="breathingMenu" class="screen">
            <button class="back-button" onclick="backToMain()">← Главное меню</button>
            
            <h2 class="page-title">Техники дыхания</h2>
            <p class="page-subtitle">Выберите подходящую практику</p>
            
            <div class="card">
                <div class="card-title">🌬️ Дыхание 4-7-8</div>
                <div class="card-description">
                    Классическая техника для снятия стресса и засыпания.<br><br>
                    • Вдох через нос 4 секунды<br>
                    • Задержка дыхания 7 секунд<br>
                    • Выдох через рот 8 секунд<br><br>
                    Подходит для ежедневной практики и перед сном.
                </div>
                <button class="card-button" onclick="showScreen('breathing478')">НАЧАТЬ →</button>
            </div>
            
            <div class="card">
                <div class="card-title">💪 Дыхание 4-8-12</div>
                <div class="card-description">
                    Усиленная версия для глубокой релаксации.<br><br>
                    • Вдох через нос 4 секунды<br>
                    • Задержка дыхания 8 секунд<br>
                    • Выдох через рот 12 секунд<br><br>
                    Эффективна при сильной тревоге и напряжении.
                </div>
                <button class="card-button" onclick="showScreen('breathing4812')">НАЧАТЬ →</button>
            </div>
        </div>

        <div id="breathing478" class="screen">
            <button class="back-button" onclick="showScreen('breathingMenu')">← Техники дыхания</button>
            
            <h2 class="page-title">Дыхание 4-7-8</h2>
            <p class="page-subtitle">Для снятия стресса и тревоги</p>
            
            <div class="card">
                <div class="card-title">💙 Что даёт эта техника?</div>
                <div class="card-description">
                    • Снижает уровень стресса и тревожности<br>
                    • Помогает быстрее заснуть<br>
                    • Активирует парасимпатическую нервную систему<br>
                    • Работает как естественное успокоительное
                </div>
            </div>
            
            <div class="instructions-card">
                <div class="instructions-title">Как дышать правильно:</div>
                <div class="instruction-row">
                    <div class="instruction-number">4</div>
                    <div class="instruction-text">
                        <div class="instruction-main">Медленный вдох через нос</div>
                        <div class="instruction-sub">наполните легкие воздухом</div>
                    </div>
                </div>
                <div class="instruction-row">
                    <div class="instruction-number">7</div>
                    <div class="instruction-text">
                        <div class="instruction-main">Задержка дыхания</div>
                        <div class="instruction-sub">спокойно удерживайте воздух</div>
                    </div>
                </div>
                <div class="instruction-row">
                    <div class="instruction-number">8</div>
                    <div class="instruction-text">
                        <div class="instruction-main">Медленный выдох через рот</div>
                        <div class="instruction-sub">полностью освободите легкие</div>
                    </div>
                </div>
            </div>
            
            <div class="breathing-circle-container">
                <div id="breathingCircle478" class="breathing-circle">
                    <div class="phase-text">Готовность</div>
                    <div class="phase-subtext">начните когда готовы</div>
                    <div class="countdown">—</div>
                </div>
            </div>
            
            <button id="startBtn478" class="control-button" onclick="startBreathing478()">НАЧАТЬ ДЫШАТЬ</button>
            <button id="stopBtn478" class="control-button stop" style="display:none" onclick="stopBreathing()">ОСТАНОВИТЬ</button>
            
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-label">Циклов</div>
                    <div id="cycles478" class="stat-value">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Время</div>
                    <div id="time478" class="stat-value">0:00</div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 20px;">
                <div class="card-title">💡 Совет</div>
                <div class="card-description">
                    Рекомендуется выполнять 4 цикла подряд. Можно делать упражнение сидя или лежа. 
                    Особенно эффективно перед сном или в стрессовой ситуации.
                </div>
            </div>
        </div>

        <div id="breathing4812" class="screen">
            <button class="back-button" onclick="showScreen('breathingMenu')">← Техники дыхания</button>
            
            <h2 class="page-title">Дыхание 4-8-12</h2>
            <p class="page-subtitle">Если не помогает первая</p>
            
            <div class="card">
                <div class="card-title">💪 Усиленная версия</div>
                <div class="card-description">
                    • Более глубокая релаксация<br>
                    • Интенсивное снятие напряжения<br>
                    • Помогает при сильной тревоге<br>
                    • Эффект наступает быстрее
                </div>
            </div>
            
            <div class="instructions-card">
                <div class="instructions-title">Усиленная техника:</div>
                <div class="instruction-row">
                    <div class="instruction-number">4</div>
                    <div class="instruction-text">
                        <div class="instruction-main">Глубокий вдох через нос</div>
                        <div class="instruction-sub">максимально наполните легкие</div>
                    </div>
                </div>
                <div class="instruction-row">
                    <div class="instruction-number">8</div>
                    <div class="instruction-text">
                        <div class="instruction-main">Долгая задержка</div>
                        <div class="instruction-sub">удерживайте спокойно</div>
                    </div>
                </div>
                <div class="instruction-row">
                    <div class="instruction-number">12</div>
                    <div class="instruction-text">
                        <div class="instruction-main">Очень медленный выдох</div>
                        <div class="instruction-sub">полностью расслабьтесь</div>
                    </div>
                </div>
            </div>
            
            <div class="breathing-circle-container">
                <div id="breathingCircle4812" class="breathing-circle">
                    <div class="phase-text">Готовность</div>
                    <div class="phase-subtext">начните когда готовы</div>
                    <div class="countdown">—</div>
                </div>
            </div>
            
            <button id="startBtn4812" class="control-button" onclick="startBreathing4812()">НАЧАТЬ ДЫШАТЬ</button>
            <button id="stopBtn4812" class="control-button stop" style="display:none" onclick="stopBreathing()">ОСТАНОВИТЬ</button>
            
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-label">Циклов</div>
                    <div id="cycles4812" class="stat-value">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Время</div>
                    <div id="time4812" class="stat-value">0:00</div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 20px;">
                <div class="card-title">⚠️ Важно</div>
                <div class="card-description">
                    Если почувствуете головокружение - сделайте паузу. 
                    Это нормальная реакция при гипервентиляции. Начните с 2-3 циклов, 
                    постепенно увеличивая до 6-8.
                </div>
            </div>
        </div>

        <div id="meditationMenu" class="screen">
            <button class="back-button" onclick="backToMain()">← Главное меню</button>
            
            <h2 class="page-title">Медитации</h2>
            <p class="page-subtitle">Практики осознанности</p>
            
            <div class="card">
                <div class="card-title">🧘 Сосредоточение на дыхании</div>
                <div class="card-description">Базовая практика mindfulness. Наблюдайте за естественным дыханием без изменений.</div>
                <button class="card-button" onclick="startMeditation('breathing', 5)">НАЧАТЬ (5 минут) →</button>
            </div>
            
            <div class="card">
                <div class="card-title">🌊 Сканирование тела</div>
                <div class="card-description">Последовательное осознавание всех частей тела от головы до пальцев ног.</div>
                <button class="card-button" onclick="startMeditation('bodyscan', 10)">НАЧАТЬ (10 минут) →</button>
            </div>
            
            <div class="card">
                <div class="card-title">💜 Любящая доброта</div>
                <div class="card-description">Практика культивирования доброжелательности к себе и другим.</div>
                <button class="card-button" onclick="startMeditation('lovingkindness', 7)">НАЧАТЬ (7 минут) →</button>
            </div>
        </div>

        <div id="meditationScreen" class="screen">
            <button class="back-button" onclick="stopMeditation()">← Завершить</button>
            
            <h2 id="meditationTitle" class="page-title">Медитация</h2>
            <p style="text-align: center; color: rgba(255,255,255,0.7); font-size: 12px; margin-bottom: 20px;">подсказки меняются каждые 30 секунд</p>
            
            <div class="meditation-circle">
                <div class="meditation-timer" id="meditationTimer">5:00</div>
                <div class="phase-subtext">осталось</div>
            </div>
            
            <div class="meditation-prompt">
                <div class="meditation-prompt-text" id="meditationPrompt">
                    Устройтесь удобно. Закройте глаза или смягчите взгляд...
                </div>
            </div>
            
            <button id="pauseBtn" class="control-button pause" onclick="togglePause()">ПАУЗА</button>
            <button class="control-button stop" onclick="stopMeditation()">ЗАВЕРШИТЬ</button>
        </div>

        <div id="relaxationMenu" class="screen">
            <button class="back-button" onclick="backToMain()">← Главное меню</button>
            
            <h2 class="page-title">Релаксация</h2>
            <p class="page-subtitle">Снятие напряжения</p>
            
            <div class="card">
                <div class="card-title">💪 Прогрессивная мышечная релаксация</div>
                <div class="card-description">Последовательное напряжение и расслабление групп мышц для глубокого отдыха.</div>
                <button class="card-button" onclick="startRelaxation('pmr', 15)">НАЧАТЬ (15 минут) →</button>
            </div>
            
            <div class="card">
                <div class="card-title">🏝️ Визуализация</div>
                <div class="card-description">Мысленное путешествие в спокойное и безопасное место.</div>
                <button class="card-button" onclick="startRelaxation('visualization', 10)">НАЧАТЬ (10 минут) →</button>
            </div>
            
            <div class="card">
                <div class="card-title">🎯 Быстрое снятие напряжения</div>
                <div class="card-description">Короткие упражнения для разных зон тела в течение дня.</div>
                <button class="card-button" onclick="startRelaxation('quickrelax', 5)">НАЧАТЬ (5 минут) →</button>
            </div>
        </div>

        <div id="relaxationScreen" class="screen">
            <button class="back-button" onclick="stopRelaxation()">← Завершить</button>
            
            <h2 id="relaxationTitle" class="page-title">Релаксация</h2>
            <p style="text-align: center; color: rgba(255,255,255,0.7); font-size: 12px; margin-bottom: 20px;">подсказки меняются каждые 30 секунд</p>
            
            <div class="meditation-circle">
                <div class="meditation-timer" id="relaxationTimer">10:00</div>
                <div class="phase-subtext">осталось</div>
            </div>
            
            <div class="meditation-prompt">
                <div class="meditation-prompt-text" id="relaxationPrompt">
                    Устройтесь удобно...
                </div>
            </div>
            
            <button id="pauseBtnRelax" class="control-button pause" onclick="togglePauseRelax()">ПАУЗА</button>
            <button class="control-button stop" onclick="stopRelaxation()">ЗАВЕРШИТЬ</button>
        </div>

        <div id="grounding" class="screen">
            <button class="back-button" onclick="backToMain()">← Главное меню</button>
            
            <h2 class="page-title">НЕ ПАНИКУЮ</h2>
            
            <div class="grounding-card" id="groundingCard">
            </div>
        </div>

        <div id="advice" class="screen">
            <button class="back-button" onclick="backToMain()">← Главное меню</button>
            
            <h2 class="page-title">Вредные советы</h2>
            <p class="page-subtitle">от психотерапевта на каждый день</p>
            
            <div class="advice-card">
                <div class="advice-header">
                    <div id="adviceNumber" class="advice-number">#1247</div>
                    <div id="todayBadge" class="today-badge" style="display:none">СЕГОДНЯ</div>
                </div>
                <div id="adviceText" class="advice-text"></div>
            </div>
            
            <div class="card">
                <p style="text-align: center; color: #666; font-size: 14px; line-height: 1.5;">
                    Ирония: Эти советы показывают, чего НЕ надо делать. 
                    Если узнали себя — самое время что-то менять.
                </p>
            </div>
        </div>
    </div>

    <script>
        const advices = [
            { id: 1247, text: 'Если чувствуешь тревогу,\nСразу думай о плохом —\nПредставляй катастрофы ярче,\nЧтобы страх совсем добить.' },
            { id: 3892, text: 'Никогда не спи достаточно,\nЛучше скролль до пяти утра.\nСон — для слабых, настоящий невротик\nДолжен быть всегда без сил.' },
            { id: 5614, text: 'Обязательно сравнивай\nСебя с людьми из инстаграма.\nИх успехи — твои провалы,\nНе забудь об этом ни на миг.' },
            { id: 7283, text: 'Копи обиды как сокровища,\nВспоминай их каждый вечер.\nЧто сказал сосед в девяностом —\nЭто важно не забыть.' },
            { id: 2156, text: 'Если злишься — держи в себе,\nУлыбайся через силу.\nПусть внутри всё закипает —\nЭто очень хорошо для язвы.' },
            { id: 9407, text: 'Планируй жизнь на сорок лет вперёд,\nРасписание по минутам.\nСпонтанность — признак незрелости,\nКонтроль важнее радости.' },
            { id: 4721, text: 'Говори всегда «я в порядке»,\nДаже если это ложь.\nЧувства прятать — вот искусство,\nМаска — лучший твой наряд.' },
            { id: 8135, text: 'Принимай всё близко к сердцу,\nКаждый взгляд и каждый жест.\nНаверняка все против тебя,\nПаранойя — друг надёжный.' },
            { id: 6549, text: 'Никогда не проси помощи,\nСправляйся всегда сам.\nНезависимость — это когда\nТонешь молча и с достоинством.' },
            { id: 3208, text: 'Жалей себя почаще,\nЭто очень продуктивно.\nВместо действий — сто причин,\nПочему тебе так плохо.' },
            { id: 1583, text: 'Откладывай важные дела\nДо последнего момента.\nСтресс дедлайна так полезен\nДля нервной системы.' },
            { id: 4926, text: 'Ешь эмоции шоколадом,\nЗапивай тоску вином.\nЧувства можно заглушить —\nГлавное, найти чем именно.' },
            { id: 7641, text: 'Требуй от себя совершенства\nВ каждой мелочи всегда.\nОшибки — это катастрофа,\nПрощать себя нельзя.' },
            { id: 2394, text: 'Читай все новости подряд,\nОсобенно негативные.\nЧем больше ужасов узнаешь,\nТем лучше спать ночами.' },
            { id: 5817, text: 'Отношения строй с теми,\nКто тебя не ценит.\nМожет, если постараешься,\nОни тебя полюбят.' },
            { id: 9152, text: 'Границы — это эгоизм,\nГовори всем только «да».\nВыгорание профессиональное —\nЗнак того, что ты хороший.' },
            { id: 3467, text: 'Прошлое перебирай почаще,\nДумай, что бы изменил.\nСожаления — отличное хобби,\nОсобенно в три часа ночи.' },
            { id: 6780, text: 'Диагнозы ставь себе по гуглу,\nСимптомы все запоминай.\nУ тебя наверняка\nВсё самое страшное сразу.' },
            { id: 8293, text: 'Конфликтов избегай любых,\nСоглашайся против воли.\nВнутренний протест копи,\nПассивная агрессия — твой стиль.' },
            { id: 1946, text: 'Живи только будущим,\nНастоящее не важно.\nКогда-нибудь потом начнёшь\nРадоваться и быть счастливым.' },
            { id: 5234, text: 'Чувства анализируй до дыр,\nПочему и отчего.\nПросто чувствовать — примитивно,\nНужно всё разобрать на части.' },
            { id: 7568, text: 'Советы раздавай всем подряд,\nДаже если не просили.\nТы же знаешь, как им жить,\nТвой опыт универсален.' },
            { id: 2801, text: 'Вини себя за всё на свете,\nЗа дождь и за войну.\nГиперответственность — признак\nЗрелой личности, конечно.' },
            { id: 4175, text: 'Медитируй по пять часов,\nЙогой мучай тело.\nДуховность — это когда больно,\nНо ты терпишь ради просветления.' },
            { id: 9423, text: 'Позитивным будь всегда,\nНегатив гони подальше.\nТоксичная позитивность —\nЛучше честных чувств.' },
            { id: 6847, text: 'Работай без выходных,\nОтпуск — признак лени.\nПрофессиональное выгорание —\nМедаль за трудолюбие.' },
            { id: 3529, text: 'Детские травмы не лечи,\nЭто всё придумки.\nПросто забудь и живи дальше,\nВытеснение решает всё.' },
            { id: 8061, text: 'В отношениях растворись полностью,\nСобственных желаний не имей.\nСозависимость романтична,\nГраницы убивают любовь.' },
            { id: 1794, text: 'Эмоции считай врагами,\nЛогика — единственный друг.\nЧувствовать — значит быть слабым,\nРобот — идеал человека.' },
            { id: 5382, text: 'И последний главный совет:\nВсё вышеперечисленное\nПрименяй в жизни активно,\nИ психотерапевт обеспечен работой.' }
        ];

        const meditationData={breathing:{title:'Сосредоточение на дыхании',prompts:['Устройтесь удобно. Закройте глаза или смягчите взгляд.','Обратите внимание на своё дыхание. Не пытайтесь его изменить.','Просто наблюдайте, как воздух входит и выходит.','Когда заметите, что отвлеклись - мягко возвращайте внимание к дыханию.','Нет правильного или неправильного способа дышать.','Если мысли уводят вас - это нормально. Просто возвращайтесь к дыханию.','Почувствуйте движение воздуха в носу или животе.','Продолжайте спокойно наблюдать за дыханием.','Скоро практика завершится. Просто будьте здесь и сейчас.','Последние моменты. Поблагодарите себя за эту практику.']},bodyscan:{title:'Сканирование тела',prompts:['Устройтесь удобно. Можно лечь или сесть.','Обратите внимание на макушку головы. Какие там ощущения?','Переместите внимание на лоб. Расслабьте все мышцы.','Почувствуйте глаза, щёки, челюсть. Отпустите напряжение.','Осознайте область рта и губ. Позвольте языку расслабиться.','Осознайте шею и плечи. Позвольте им расслабиться.','Обратите внимание на правую руку от плеча до кончиков пальцев.','Теперь левую руку - от плеча до кончиков пальцев.','Почувствуйте обе руки одновременно. Они расслаблены и тяжёлые.','Почувствуйте грудь и живот. Дыхание движет вашим телом.','Осознайте всю спину, от лопаток до поясницы.','Обратите внимание на таз, ягодицы. Отпустите напряжение.','Почувствуйте правую ногу - бедро, колено, голень, стопу.','Теперь левую ногу - от бедра до стопы.','Почувствуйте обе ноги. Они расслаблены.','Почувствуйте стопы и пальцы ног. Осознайте всё тело целиком.','Ваше тело полностью расслаблено. Просто наблюдайте.','Останьтесь в этом спокойном состоянии.','Медленно начните двигать пальцами рук и ног.','Когда будете готовы, мягко откройте глаза.']},lovingkindness:{title:'Любящая доброта',prompts:['Устройтесь удобно. Положите руку на сердце.','Подумайте о себе с добротой. Вы достойны заботы.','Про себя скажите: "Пусть я буду счастлив"','"Пусть я буду здоров"','"Пусть я буду в безопасности"','"Пусть я живу с лёгкостью"','Почувствуйте эти пожелания для себя. Вы их заслуживаете.','Теперь подумайте о близком человеке, которого любите.','Представьте его образ. Почувствуйте тепло к нему.','Пожелайте ему: "Пусть ты будешь счастлив"','"Пусть ты будешь здоров и в безопасности"','Расширьте это чувство на всех близких людей вокруг.','Теперь на всех людей - знакомых и незнакомых.','Пожелайте благополучия всем живым существам.','Почувствуйте тепло в области сердца. Это чувство любящей доброты.','Побудьте с этим чувством. Оно всегда с вами.']}};

        const relaxationData={pmr:{title:'Прогрессивная мышечная релаксация',prompts:['Устройтесь удобно, лёжа или сидя. Дышите естественно.','Мы будем работать с разными группами мышц. Напрягайте на 5 секунд, затем расслабляйте.','Правая рука: Сожмите кулак на 5 секунд... Отпустите. Почувствуйте тепло.','Левая рука: Сожмите кулак... Расслабьте. Ощутите разницу.','Обе руки: Напрягите бицепсы, прижмите локти к телу... Расслабьте полностью.','Заметьте, как приятно расслабление после напряжения.','Лицо: Поднимите брови высоко вверх... Расслабьте лоб. Он становится гладким.','Глаза: Зажмурьтесь крепко... Отпустите. Веки тяжёлые.','Рот и челюсть: Сожмите зубы, напрегите челюсть... Расслабьте, приоткройте рот.','Всё лицо расслаблено. Чувствуете тепло и тяжесть?','Шея: Прижмите подбородок к груди... Отпустите напряжение.','Теперь откиньте голову назад... Верните в нейтральное положение.','Плечи: Поднимите плечи к ушам... Опустите их вниз. Они тяжёлые.','Повторите: плечи вверх... и вниз. Полностью расслабьте.','Грудь: Глубокий вдох, задержите дыхание... Медленный выдох, расслабьтесь.','Ещё раз глубоко вдохните... Выдохните всё напряжение.','Спина: Сведите лопатки вместе... Отпустите. Спина мягкая.','Прогните спину слегка... Расслабьте, вернитесь в удобное положение.','Живот: Втяните живот максимально... Расслабьте. Дышите свободно.','Напрягите пресс... Отпустите. Живот мягкий и расслабленный.','Ягодицы: Сожмите ягодицы... Отпустите полностью.','Бёдра: Напрягите мышцы бёдер... Расслабьте. Они становятся тяжёлыми.','Икры: Потяните носки на себя... Расслабьте ноги.','Теперь от себя... И снова расслабьте.','Стопы: Сожмите пальцы ног... Отпустите. Стопы расслаблены.','Разведите пальцы ног... Расслабьте.','Всё тело целиком: Напрягите всё сразу - руки, лицо, корпус, ноги...','И полностью расслабьтесь. Отпустите всё напряжение из тела.','Побудьте в этом состоянии глубокого расслабления. Наслаждайтесь покоем.','Медленно начните двигаться. Откройте глаза когда будете готовы.']},visualization:{title:'Визуализация безопасного места',prompts:['Устройтесь удобно, закройте глаза. Дышите спокойно.','Представьте место, где вы чувствуете себя в полной безопасности.','Это может быть реальное место или вымышленное. Пляж, лес, горы, уютная комната.','Дайте образу проявиться. Не торопитесь.','Что вы видите? Начните с общей картины.','Рассмотрите цвета вокруг вас. Какие оттенки преобладают?','Заметьте свет - яркий солнечный или мягкий рассеянный?','Обратите внимание на тени и контрасты.','Какие формы и текстуры вас окружают?','Что вы слышите? Может быть, звуки природы?','Шум волн, пение птиц, шелест листьев, журчание воды...','Или это приятная тишина? Какие звуки наполняют ваше место?','Что вы чувствуете кожей? Температуру воздуха?','Тепло солнца на лице, прохладу ветра, влажность воздуха.','Какие поверхности под вашими руками? Мягкие, гладкие, тёплые?','Ощутите комфорт всем телом. Вы в полной безопасности здесь.','Что вы ощущаете носом? Какие запахи присутствуют?','Морской бриз, аромат хвои, свежесть травы, запах цветов...','Возможно, чувствуете вкус - морской соли, свежих фруктов, любимого напитка.','Побудьте в этом месте. Исследуйте его.','Запомните все ощущения. Это ваше безопасное убежище.','Вы всегда можете вернуться сюда мысленно, когда захотите.','Медленно начните осознавать своё физическое тело.','Когда будете готовы, мягко откройте глаза.']},quickrelax:{title:'Быстрая релаксация',prompts:['Начнём с быстрых упражнений для снятия напряжения.','Лицо: Поднимите брови - расслабьте. Зажмурьтесь - откройте.','Надуйте щёки - выпустите воздух. Помассируйте виски круговыми движениями.','Шея: Поднимите плечи к ушам - опустите. Повторите 3 раза.','Медленные круговые движения плечами назад, затем вперёд.','Наклоны головы: вправо - влево. Повороты головы в стороны.','Руки: Сильно сожмите кулаки - разожмите. Растопырьте пальцы максимально.','Потрясите руками. Помассируйте запястья.','Дыхание: 3 глубоких вдоха-выдоха. Выдох в 2 раза длиннее вдоха.','Дыхание животом. Зевните несколько раз, даже специально.','Почувствуйте, как напряжение уходит из тела.','Вы расслаблены и спокойны. Можете вернуться к своим делам.']}};

        let currentBreathingMode=null,breathingInterval=null,breathingTimeout=null,cycles=0,totalTime=0,timeInterval=null;
        let meditationInterval=null,meditationTimeLeft=0,currentMeditationType=null,currentPromptIndex=0,isPaused=false,promptInterval=null;
        let relaxationInterval=null,relaxationTimeLeft=0,currentRelaxationType=null,currentRelaxPromptIndex=0,isRelaxPaused=false,relaxPromptInterval=null;
        let currentGroundingStep=0;
        
        const groundingSteps=[{type:'intro',title:'Техника заземления 5-4-3-2-1',subtitle:'Помогает быстро справиться с паникой и вернуться в "здесь и сейчас".\n\nДелайте медленно и вдумчиво. На каждый пункт тратьте 30-60 секунд.'},{number:'5',title:'ПОСМОТРИТЕ',description:'Назовите 5 вещей, которые вы видите вокруг себя',example:'Например: окно, стол, телефон, дверь, лампа'},{number:'4',title:'ПОТРОГАЙТЕ',description:'Прикоснитесь к 4 разным поверхностям и ощутите их текстуру',example:'Например: ткань одежды, край стола, волосы, телефон'},{number:'3',title:'ПОСЛУШАЙТЕ',description:'Назовите 3 звука, которые вы слышите прямо сейчас',example:'Например: ваше дыхание, шум улицы, тиканье часов'},{number:'2',title:'УЛОВИТЕ',description:'Назовите 2 запаха, которые вы чувствуете',example:'Например: кофе, свежий воздух, или запах одежды'},{number:'1',title:'ПОЧУВСТВУЙТЕ',description:'Сосредоточьтесь на 1 вкусе во рту',example:'Например: мята, кофе или просто вкус слюны'},{type:'outro',title:'Отличная работа! 🌟',subtitle:'Вы вернулись в настоящий момент.\n\nИспользуйте эту технику когда почувствуете:\n• Начало паники\n• Накручивание себя\n• Ощущение нереальности\n• Зацикливание на страхах'}];

        function showScreen(s){document.querySelectorAll('.screen').forEach(e=>e.classList.remove('active'));document.getElementById(s).classList.add('active');if(s==='advice')showDailyAdvice();if(s==='grounding')initGrounding();if(s!=='breathing478'&&s!=='breathing4812')stopBreathing();if(s==='breathingMenu')stopBreathing();if(s!=='meditationScreen')stopMeditation();if(s!=='relaxationScreen')stopRelaxation();}
        function backToMain(){stopBreathing();stopMeditation();stopRelaxation();showScreen('mainMenu');}
        function showDailyAdvice(){const t=new Date(),d=Math.floor((t-new Date(t.getFullYear(),0,0))/864e5),i=d%advices.length,a=advices[i];document.getElementById('adviceNumber').textContent='#'+a.id;document.getElementById('adviceText').textContent=a.text;document.getElementById('todayBadge').style.display='block';}
        function formatTime(s){const m=Math.floor(s/60),sec=s%60;return `${m}:${sec.toString().padStart(2,'0')}`;}
        function startBreathing478(){if(currentBreathingMode)stopBreathing();currentBreathingMode='478';cycles=0;totalTime=0;startBreathing(4,7,8);document.getElementById('startBtn478').style.display='none';document.getElementById('stopBtn478').style.display='block';timeInterval=setInterval(()=>{totalTime++;document.getElementById('time478').textContent=formatTime(totalTime);},1000);}
        function startBreathing4812(){if(currentBreathingMode)stopBreathing();currentBreathingMode='4812';cycles=0;totalTime=0;startBreathing(4,8,12);document.getElementById('startBtn4812').style.display='none';document.getElementById('stopBtn4812').style.display='block';timeInterval=setInterval(()=>{totalTime++;document.getElementById('time4812').textContent=formatTime(totalTime);},1000);}
        function startBreathing(i,h,e){const c=currentBreathingMode==='478'?document.getElementById('breathingCircle478'):document.getElementById('breathingCircle4812');const cy=currentBreathingMode==='478'?document.getElementById('cycles478'):document.getElementById('cycles4812');c.classList.add('breathing');breathingCycle();function breathingCycle(){updateCircle(c,'Вдох','через нос',i);animateCircle(c,i,1.2);breathingTimeout=setTimeout(()=>{updateCircle(c,'Задержка','спокойно',h);animateCircle(c,h,1.2);breathingTimeout=setTimeout(()=>{updateCircle(c,'Выдох','через рот',e);animateCircle(c,e,0.85);breathingTimeout=setTimeout(()=>{cycles++;cy.textContent=cycles;breathingCycle();},e*1000);},h*1000);},i*1000);}}
        function updateCircle(c,p,s,d){if(!c)return;const pt=c.querySelector('.phase-text'),ps=c.querySelector('.phase-subtext'),cd=c.querySelector('.countdown');if(!pt||!ps||!cd)return;pt.textContent=p;ps.textContent=s;if(p!=='Готовность'){c.classList.add('phase-changing');setTimeout(()=>c.classList.remove('phase-changing'),400);if('vibrate'in navigator)navigator.vibrate(150);}clearInterval(breathingInterval);if(d>0){let t=d;cd.textContent=t;breathingInterval=setInterval(()=>{t--;cd.textContent=t;if(t<=0)clearInterval(breathingInterval);},1000);}else cd.textContent='—';}
        function animateCircle(c,d,s){c.style.transition=`transform ${d}s ease-in-out`;c.style.transform=`scale(${s})`;}
        function stopBreathing(){if(breathingInterval)clearInterval(breathingInterval);if(breathingTimeout)clearTimeout(breathingTimeout);if(timeInterval)clearInterval(timeInterval);const c478=document.getElementById('breathingCircle478');if(c478){c478.classList.remove('breathing');c478.style.transform='scale(1)';updateCircle(c478,'Готовность','начните когда готовы',0);}const sb478=document.getElementById('startBtn478'),stb478=document.getElementById('stopBtn478');if(sb478)sb478.style.display='block';if(stb478)stb478.style.display='none';const c4812=document.getElementById('breathingCircle4812');if(c4812){c4812.classList.remove('breathing');c4812.style.transform='scale(1)';updateCircle(c4812,'Готовность','начните когда готовы',0);}const sb4812=document.getElementById('startBtn4812'),stb4812=document.getElementById('stopBtn4812');if(sb4812)sb4812.style.display='block';if(stb4812)stb4812.style.display='none';currentBreathingMode=null;}
        function startMeditation(t,d){if(meditationInterval)clearInterval(meditationInterval);if(promptInterval)clearInterval(promptInterval);currentMeditationType=t;meditationTimeLeft=d*60;currentPromptIndex=0;isPaused=false;const data=meditationData[t];document.getElementById('meditationTitle').textContent=data.title;document.getElementById('meditationPrompt').textContent=data.prompts[0];document.getElementById('meditationTimer').textContent=formatTime(meditationTimeLeft);showScreen('meditationScreen');meditationInterval=setInterval(()=>{if(!isPaused){meditationTimeLeft--;document.getElementById('meditationTimer').textContent=formatTime(meditationTimeLeft);if(meditationTimeLeft<=0){stopMeditation();alert('Медитация завершена! 🙏');}}},1000);const pd=30;let pt=pd;promptInterval=setInterval(()=>{if(!isPaused){pt--;if(pt<=0&&currentPromptIndex<data.prompts.length-1){currentPromptIndex++;const pe=document.getElementById('meditationPrompt');const pc=pe.parentElement;pc.classList.add('flash');setTimeout(()=>pc.classList.remove('flash'),500);const ci=document.querySelector('#meditationScreen .meditation-circle');if(ci){ci.classList.add('phase-changing');setTimeout(()=>ci.classList.remove('phase-changing'),400);}pe.textContent=data.prompts[currentPromptIndex];pt=pd;if('vibrate'in navigator)navigator.vibrate(200);}}},1000);}
        function togglePause(){isPaused=!isPaused;const b=document.getElementById('pauseBtn');if(isPaused){b.textContent='ПРОДОЛЖИТЬ';b.classList.remove('pause');b.classList.add('resume');}else{b.textContent='ПАУЗА';b.classList.remove('resume');b.classList.add('pause');}}
        function stopMeditation(){if(meditationInterval)clearInterval(meditationInterval);if(promptInterval)clearInterval(promptInterval);isPaused=false;currentMeditationType=null;meditationInterval=null;promptInterval=null;const b=document.getElementById('pauseBtn');if(b){b.textContent='ПАУЗА';b.classList.remove('resume');b.classList.add('pause');}const ms=document.getElementById('meditationScreen');if(ms&&ms.classList.contains('active'))showScreen('meditationMenu');}
        function startRelaxation(t,d){if(relaxationInterval)clearInterval(relaxationInterval);if(relaxPromptInterval)clearInterval(relaxPromptInterval);currentRelaxationType=t;relaxationTimeLeft=d*60;currentRelaxPromptIndex=0;isRelaxPaused=false;const data=relaxationData[t];document.getElementById('relaxationTitle').textContent=data.title;document.getElementById('relaxationPrompt').textContent=data.prompts[0];document.getElementById('relaxationTimer').textContent=formatTime(relaxationTimeLeft);showScreen('relaxationScreen');relaxationInterval=setInterval(()=>{if(!isRelaxPaused){relaxationTimeLeft--;document.getElementById('relaxationTimer').textContent=formatTime(relaxationTimeLeft);if(relaxationTimeLeft<=0){stopRelaxation();alert('Релаксация завершена! 🌸');}}},1000);const pd=30;let pt=pd;relaxPromptInterval=setInterval(()=>{if(!isRelaxPaused){pt--;if(pt<=0&&currentRelaxPromptIndex<data.prompts.length-1){currentRelaxPromptIndex++;const pe=document.getElementById('relaxationPrompt');const pc=pe.parentElement;pc.classList.add('flash');setTimeout(()=>pc.classList.remove('flash'),500);const ci=document.querySelector('#relaxationScreen .meditation-circle');if(ci){ci.classList.add('phase-changing');setTimeout(()=>ci.classList.remove('phase-changing'),400);}pe.textContent=data.prompts[currentRelaxPromptIndex];pt=pd;if('vibrate'in navigator)navigator.vibrate(200);}}},1000);}
        function togglePauseRelax(){isRelaxPaused=!isRelaxPaused;const b=document.getElementById('pauseBtnRelax');if(isRelaxPaused){b.textContent='ПРОДОЛЖИТЬ';b.classList.remove('pause');b.classList.add('resume');}else{b.textContent='ПАУЗА';b.classList.remove('resume');b.classList.add('pause');}}
        function stopRelaxation(){if(relaxationInterval)clearInterval(relaxationInterval);if(relaxPromptInterval)clearInterval(relaxPromptInterval);isRelaxPaused=false;currentRelaxationType=null;relaxationInterval=null;relaxPromptInterval=null;const b=document.getElementById('pauseBtnRelax');if(b){b.textContent='ПАУЗА';b.classList.remove('resume');b.classList.add('pause');}const rs=document.getElementById('relaxationScreen');if(rs&&rs.classList.contains('active'))showScreen('relaxationMenu');}
        function initGrounding(){currentGroundingStep=0;renderGroundingCard();}
        function renderGroundingCard(){const cd=document.getElementById('groundingCard');const st=groundingSteps[currentGroundingStep];let ct='';if(st.type==='intro'){ct=`<div class="grounding-card-content grounding-intro"><div class="grounding-intro-title">${st.title}</div><div class="grounding-intro-subtitle">${st.subtitle.replace(/\n/g,'<br>')}</div><button class="start-grounding-button" onclick="nextGroundingStep()">Начать</button></div>`;}else if(st.type==='outro'){ct=`<div class="grounding-card-content grounding-outro"><div class="grounding-intro-title">${st.title}</div><div class="grounding-intro-subtitle">${st.subtitle.replace(/\n/g,'<br>')}</div><button class="start-grounding-button" onclick="initGrounding()">Начать заново</button></div>`;}else{const sn=currentGroundingStep;const ts=groundingSteps.length-2;ct=`<div class="grounding-card-content"><div class="grounding-step-number">${st.number}</div><div class="grounding-step-title">${st.title}</div><div class="grounding-step-description">${st.description}</div><div class="grounding-step-example">${st.example}</div></div><div class="grounding-navigation"><button class="grounding-nav-button" onclick="prevGroundingStep()" ${sn===1?'disabled':''}>←</button><div class="grounding-progress">${sn} / ${ts}</div><button class="grounding-nav-button" onclick="nextGroundingStep()" ${sn===ts?'disabled':''}>→</button></div>`;}cd.innerHTML=ct;cd.classList.remove('slide-in-left','slide-in-right');void cd.offsetWidth;cd.classList.add(currentGroundingStep>0?'slide-in-right':'slide-in-left');if(!st.type&&currentGroundingStep>0&&currentGroundingStep<groundingSteps.length-1){if('vibrate'in navigator)navigator.vibrate(150);}}
        function nextGroundingStep(){if(currentGroundingStep<groundingSteps.length-1){currentGroundingStep++;renderGroundingCard();}}
        function prevGroundingStep(){if(currentGroundingStep>0){currentGroundingStep--;renderGroundingCard();}}
        let touchStartX=0,touchEndX=0;
        document.addEventListener('DOMContentLoaded',function(){const gc=document.getElementById('groundingCard');if(gc){gc.addEventListener('touchstart',function(e){touchStartX=e.changedTouches[0].screenX;},false);gc.addEventListener('touchend',function(e){touchEndX=e.changedTouches[0].screenX;handleGroundingSwipe();},false);}});
        function handleGroundingSwipe(){const gs=document.getElementById('grounding');if(!gs||!gs.classList.contains('active'))return;const st=50;const df=touchStartX-touchEndX;if(Math.abs(df)>st){if(df>0)nextGroundingStep();else prevGroundingStep();}}
        document.addEventListener('keydown',function(e){const gs=document.getElementById('grounding');if(gs&&gs.classList.contains('active')){if(e.key==='ArrowRight'||e.key==='Right')nextGroundingStep();else if(e.key==='ArrowLeft'||e.key==='Left')prevGroundingStep();}});
    </script>
</body>
</html>